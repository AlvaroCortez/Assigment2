package com.assigment2.audioplayer;

import android.content.Context;
import android.media.AudioManager;
import android.media.MediaPlayer;

public class AudioPlayerSingleton {
	
	MediaPlayer mediaPlayer = MediaPlayer.create(getContext(), R.raw.tensec);//;
	private float leftVolumeCanal, rightVolumeCanal;
	Context context;

	private AudioPlayerSingleton(){
		
	}
	
	private static class AudioPlayerSingletonHolder{
		private final static AudioPlayerSingleton audioPlayerInstance = new AudioPlayerSingleton();
	}
	
	public static AudioPlayerSingleton getAudioPlayerInstance(){
		return AudioPlayerSingletonHolder.audioPlayerInstance;
	}
	
	public void setContext(Context context){//!
		this.context =context;
	}
	
	public Context getContext(){
		return context;
	}
	
	public void create(Context context, int id){
		mediaPlayer = MediaPlayer.create(context, id);
		mediaPlayer.setScreenOnWhilePlaying(true);
		mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
	}
	
	public void play(){
		if (isPlaying()){
			return;
		}
		mediaPlayer.start();
	}
	
	public void pause(){
		mediaPlayer.pause();
	}
	
	public boolean isPlaying(){
		return mediaPlayer.isPlaying();
	}
	
	public void setVolume(float leftVolume, float rightVolume){
		mediaPlayer.setVolume(leftVolume, rightVolume);
		leftVolumeCanal = leftVolume;
		rightVolumeCanal = rightVolume;
	}
	
	public float getLeftVolumeCanal(){
		return leftVolumeCanal;
	}
	
	public float getRightVolumeCanal(){
		return rightVolumeCanal;
	}
	
	public void dispose(){
		if (isPlaying()){
			mediaPlayer.stop();
		}
		mediaPlayer.release();
		mediaPlayer = null;
	}
	
	public void seekAudio(int currentPosition){// не факт что нужна
		mediaPlayer.seekTo(currentPosition);
	}
}
